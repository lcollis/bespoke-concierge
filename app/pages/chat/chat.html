<ActionBar>
    <NavigationButton text='Go Back' android.systemIcon='ic_menu_back' (tap)='onNavBtnTap()'> </NavigationButton>
</ActionBar>

<GridLayout rows="*,auto">
    <GridLayout>
        <ListView [items]="messages" #listview>
            <template let-item="item">
            <GridLayout columns="50,*,auto">
                <Label textWrap="true" verticalAlignment="center" col="1" [text]="item.text" minHeight="50"></Label>
                <Label verticalAlignment="top" horizontalAlignment="right" col="2" [text]="item.timeStamp | fromNow"></Label>
            </GridLayout>
            </template>
        </ListView>
    </GridLayout>
    
    <GridLayout row="1" columns="*,auto">
        <TextField hint="Enter message ...." row="1" [(ngModel)]="newMessage" [isEnabled]="!loading"></TextField>
        <Button row="1" col="1" text="Send" (tap)="addMessage(newMessage)" [isEnabled]="!loading"></Button>
    </GridLayout>
</GridLayout>

<ActivityIndicator *ngIf="loading" busy="true" width="100" height="100"></ActivityIndicator>